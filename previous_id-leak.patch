diff -up gnome-session-2.23.92/gnome-session/gsm-xsmp-client.c.previous_id-leak.patch gnome-session-2.23.92/gnome-session/gsm-xsmp-client.c
--- gnome-session-2.23.92/gnome-session/gsm-xsmp-client.c.previous_id-leak.patch	2008-09-14 18:57:14.000000000 -0400
+++ gnome-session-2.23.92/gnome-session/gsm-xsmp-client.c	2008-09-14 18:57:30.000000000 -0400
@@ -857,13 +857,12 @@ register_client_callback (SmsConn    con
                 g_debug ("GsmXSMPClient: Sending initial SaveYourself");
                 SmsSaveYourself (conn, SmSaveLocal, False, SmInteractStyleNone, False);
                 client->priv->current_save_yourself = SmSaveLocal;
-
-                free (previous_id);
         }
 
         gsm_client_set_status (GSM_CLIENT (client), GSM_CLIENT_REGISTERED);
 
         g_free (id);
+        free (previous_id);
 
         return TRUE;
 }
